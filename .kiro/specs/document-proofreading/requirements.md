# 要件定義: 日本語文書校正支援（document-proofreading）

## 目的（Why）
- 日本語の文章をローカル環境で安全に校正し、誤字脱字、文法・スタイル不一致、用語ゆれ、表記ルール逸脱を素早く発見・是正できるようにする。
- 執筆者・編集者の作業効率と品質を同時に向上させる（提案の明確さ、再現性、短いフィードバックループ）。

## 対象ユーザー（Who）
- 個人のブロガーや技術ライター、チームの編集担当者、プロダクトドキュメントの作成者。
- ネットワークに出したくない原稿を扱うユーザー（プライバシー・守秘が重要）。

## スコープ（What）
- 校正の核となる機能:
  - 文法・スタイルチェック（日本語特有の表記・助詞・敬語・句読点の扱い）
  - 用字用語・表記統一（全角/半角、英数字・記号、送り仮名）
  - タイポ検出・簡易スペルチェック（辞書と候補提示）
  - 禁則・不適切表現の検出（社内・媒体のガイドラインに合わせたカスタムルール）
  - 自動修正（fix）が可能な指摘は一括適用／個別適用に対応
  - 差分表示（原文と修正案の比較）
- 運用面の機能:
  - ローカル実行（オフライン動作前提）
  - 文章入力UI（エディタ）・ファイル読み込み（.md/.txt など）
  - 結果のハイライト表示、指摘一覧、フィルタリング（重大度・ルール別）
  - 設定管理（ルールON/OFF、重大度、辞書・用語集）
  - プロジェクト単位の設定（リポジトリ/フォルダごとに設定ファイルを解決）
  - 無視リスト（行単位・ルール単位での抑制）
  - ルール拡張（独自ルールの追加・配布）

## 非スコープ（Out of Scope）
- クラウドAPI依存のAI文書生成や高度な意図理解（将来拡張の検討余地）。
- DTPレイアウトや画像中テキストOCRの直接処理（別ツール連携は検討）。

## 成功指標（KPIs）
- 初回導入から5分以内に校正実行できる。
- 代表的なミス（助詞の重複、表記ゆれ、全角/半角の混在など）の検出再現率 > 90%。
- 自動修正可能な指摘のうち、ユーザーがそのまま適用する割合 > 60%。
- 1,500文字の文書で校正結果表示までの体感レイテンシ < 1 秒（ローカル環境想定）。

## 非機能要件（NFRs）
- プライバシー: 入力文書はローカル外へ送信しない。
- パフォーマンス: 中規模文書（~10,000字）を快適に処理。
- ポータビリティ: クロスプラットフォーム（Win/Mac/Linux）で再現可能。
- 拡張性: ルールと辞書をプラガブルに追加可能。
- アクセシビリティ: キーボード操作、読みやすいコントラスト、スクリーンリーダー配慮。

## 制約・前提
- 完全ローカルで動作する技術選択（サードパーティのオンラインAPIへ依存しない）。
- 既存の日本語向けテキストリンティングの資産活用（例: textlint と日本語系ルール群）。
- プロジェクト設定はテキスト（JSON/YAML）で管理し、VCSに格納可能。

## 依存関係（候補）
- JavaScript/TypeScript ランタイム（Node.js）
- textlint 本体および日本語向けルール・プリセット（オフライン利用）
- 形態素解析（必要に応じて）: Kuromoji/Sudachi ベースのローカル辞書

## ユースケース
- 単一記事の校正（エディタ画面に貼り付け／ファイルを開く → 指摘 → 修正）
- 複数ファイルの一括チェック（フォルダ指定 → レポート生成 → 修正反映）
- チーム標準の用語集適用（共通辞書とプリセット設定を共有）

## リスクと緩和
- 誤検知（False Positive）: ルールの重大度と無視リスト、学習サイクルでチューニング。
- パフォーマンス低下: ルールの並列化/キャッシュ、差分処理、軽量辞書の採用。
- 辞書管理の負担: 共有辞書のバージョニングと更新UIを提供。

## 承認基準（Definition of Ready/Done）
- Ready: 上記機能のMVP範囲と依存が合意され、設計の方向性が固まっている。
- Done: MVP実装後、代表サンプルでの実動確認とKPIの一部達成を検証。
